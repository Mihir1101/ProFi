// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.18;

import "@openzeppelin/contracts/access/Ownable.sol";

contract DOGE is Ownable {
    // ========================================================
    //        Storage Variables, events and constructors
    // ========================================================

    // =========================================================
    //                      Safe Math
    // =========================================================

    function SafeSub(uint256 a, uint256 b) public pure returns (uint256) {
        if (a < b) {
            return (b - a);
        } else {
            return (a - b);
        }
    }

    uint256[] private open;
    uint256[] private close;
    uint256[] private high;
    uint256[] private low;
    uint256[] private volume;
    uint256[] private marketCap;
    uint256 private markets;
    uint256 private github_commits;
    uint256[] private algo_array;

    constructor(address initialOwner) Ownable(initialOwner) {
        open = [
            4227829,
            15577899,
            10721200,
            5062550,
            5011580,
            3393990,
            2674600,
            2092659,
            1310569,
            3995379,
            2359729,
            2413309,
            1864030,
            1383619,
            1449230,
            1255490,
            1034969,
            1537509,
            1987019,
            1842079,
            1283599,
            1226689,
            1371160,
            1288089,
            1500340,
            2776629,
            2499649,
            2329989,
            2256180,
            2312129,
            3043379,
            2303200,
            2352989,
            2324539,
            2201839,
            2145890,
            2234359,
            2107750,
            2056389,
            3328899,
            7462120,
            26650899,
            26013299,
            17191800,
            20637400,
            11415800,
            11427899,
            20508000,
            90308897,
            60214400,
            60420399,
            28183399,
            52718301,
            34273499,
            25082400,
            30179000,
            47410700,
            59011400,
            37594500,
            21754145,
            23464184,
            19256919,
            19764730,
            20823276,
            25102722,
            34432360,
            32502639,
            29004630,
            25120301,
            23925755,
            26169066,
            23200196,
            20280365,
            23912523,
            22332458,
            18118040,
            24443889,
            25551532,
            23196769,
            32253614,
            32196807,
            26305300,
            25759400,
            35513600,
            46809400,
            370535900,
            480700800,
            536546500,
            3375586800,
            3257444100,
            2538280200,
            2077534900,
            2780618900,
            2044269823,
            2801226781,
            2144867956,
            1705104824,
            1418048384,
            1331736815,
            1379216778,
            1275886339,
            858553204,
            662084975,
            682661922,
            613360088,
            616495797,
            1269845168,
            1068572333,
            702874592,
            961567245,
            807622363,
            770245671,
            797595873,
            716620757,
            664810473,
            778235076,
            637865537
        ];
        close = [
            2030280,
            8227420,
            4432389,
            3407759,
            3342549,
            2596029,
            2002359,
            1034949,
            1269409,
            2227899,
            2037049,
            1674109,
            1126619,
            1357949,
            1218109,
            975321,
            854743,
            1355160,
            1651710,
            1188539,
            1198940,
            1126380,
            1189570,
            1238069,
            1340070,
            2436729,
            2070979,
            1970849,
            2185610,
            2262689,
            2304590,
            2034700,
            2222309,
            2130159,
            2130469,
            2079279,
            1949800,
            1960170,
            1946130,
            3166910,
            5728009,
            22451600,
            12802300,
            15746799,
            6255590,
            9380599,
            10015800,
            19706999,
            54993401,
            30358999,
            26475100,
            25952099,
            31677300,
            22930300,
            21873100,
            21433200,
            43368300,
            36761800,
            20057000,
            20305862,
            19124818,
            18346912,
            19467723,
            20781785,
            24491445,
            29775645,
            27721377,
            23920999,
            20759045,
            22834218,
            21276313,
            19969687,
            19831240,
            22111913,
            12470572,
            17755235,
            23382020,
            22827790,
            22769207,
            31654734,
            25355500,
            25177200,
            24523500,
            30087800,
            46152800,
            291945900,
            478788699,
            536442500,
            2182670100,
            1646537900,
            1607276700,
            1937501200,
            1944888938,
            2019941369,
            1903442952,
            1328261338,
            1228164088,
            1095549358,
            1106860351,
            1238686185,
            700366682,
            497197616,
            583977098,
            605503545,
            561803234,
            557405361,
            721088685,
            669526933,
            692887692,
            790576779,
            630226649,
            761435458,
            692244816,
            585359429,
            639997875,
            583399712,
            594861581
        ];
        high = [
            23348398,
            19444900,
            14329400,
            8031040,
            5116719,
            4345540,
            2871209,
            2141720,
            4673369,
            4056440,
            2650069,
            2444839,
            1872639,
            1556399,
            1766210,
            1309710,
            2024020,
            2321710,
            2466950,
            1866499,
            1352289,
            1656020,
            1668009,
            1598130,
            5004639,
            3276540,
            2599119,
            2415729,
            2459429,
            3437940,
            3091089,
            2765390,
            2713380,
            2369099,
            2575989,
            2519520,
            2570979,
            2169289,
            3595630,
            7709590,
            40441402,
            40364898,
            28928199,
            21514000,
            27012301,
            12537799,
            25808899,
            107287997,
            187733006,
            82881003,
            63195801,
            59580598,
            56491801,
            38357500,
            43139201,
            48487100,
            69331200,
            60239100,
            39513400,
            27785346,
            24580756,
            21385643,
            21656738,
            40955769,
            35995893,
            35225115,
            44708629,
            33160468,
            29933183,
            29316632,
            27847006,
            23942352,
            25699674,
            35309077,
            25307000,
            26891135,
            26780796,
            26692077,
            54200157,
            37966137,
            32811989,
            28928300,
            42563000,
            54057600,
            779732499,
            849450600,
            630524500,
            4377000700,
            7375666000,
            4445900000,
            2600918500,
            3509529800,
            3197505800,
            3388429250,
            2965315838,
            2230105374,
            2032319441,
            1715861435,
            1527371857,
            1780452803,
            1373127352,
            886471911,
            765738886,
            886391272,
            679727017,
            1493916747,
            1572029064,
            1110121550,
            973345608,
            995303944,
            825641916,
            1026400975,
            812917719,
            732502540,
            833407051,
            781952511,
            646582448
        ];
        low = [
            2030280,
            8227420,
            4432389,
            3407759,
            3342549,
            2596029,
            2002359,
            1034949,
            1269409,
            2227899,
            2037049,
            1674109,
            1126619,
            1357949,
            1218109,
            975321,
            854743,
            1355160,
            1651710,
            1188539,
            1198940,
            1126380,
            1189570,
            1238069,
            1340070,
            2436729,
            2070979,
            1970849,
            2185610,
            2262689,
            2304590,
            2034700,
            2222309,
            2130159,
            2130469,
            2079279,
            1949800,
            1960170,
            1946130,
            3166910,
            5728009,
            22451600,
            12802300,
            15746799,
            6255590,
            9380599,
            10015800,
            19706999,
            54993401,
            30358999,
            26475100,
            25952099,
            31677300,
            22930300,
            21873100,
            21433200,
            43368300,
            36761800,
            20057000,
            20305862,
            19124818,
            18346912,
            19467723,
            20781785,
            24491445,
            29775645,
            27721377,
            23920999,
            20759045,
            22834218,
            21276313,
            19969687,
            19831240,
            22111913,
            12470572,
            17755235,
            23382020,
            22827790,
            22769207,
            31654734,
            25355500,
            25177200,
            24523500,
            30087800,
            46152800,
            291945900,
            478788699,
            536442500,
            2182670100,
            1646537900,
            1607276700,
            1937501200,
            1944888938,
            2019941369,
            1903442952,
            1328261338,
            1228164088,
            1095549358,
            1106860351,
            1238686185,
            700366682,
            497197616,
            583977098,
            605503545,
            561803234,
            557405361,
            721088685,
            669526933,
            692887692,
            790576779,
            630226649,
            761435458,
            692244816,
            585359429,
            639997875,
            583399712,
            594861581
        ];
        volume = [
            10033800000000000,
            15190400000000000,
            13774000000000000,
            11492500000000000,
            8709010000000000,
            3827760000000000,
            1899310000000000,
            2917650000000000,
            7603410000000000,
            1860970000000000,
            2390060000000000,
            3146330000000000,
            2377500000000000,
            654519000000000,
            510693000000000,
            1215230000000000,
            3325220000000000,
            4702300000000000,
            1372410000000000,
            414054000000000,
            393256000000000,
            1563060000000000,
            1499010000000000,
            954462000000000,
            17502200000000000,
            1579050000000000,
            2561640000000000,
            788797000000000,
            1811070000000000,
            3599160000000000,
            891868000000000,
            1815700000000000,
            1471260000000000,
            1478920000000000,
            505240000000000,
            734955000000000,
            1220780000000000,
            909318000000000,
            25257000000000000,
            36141800000000000,
            198406000000000000,
            48285600000000000,
            38416800000000000,
            129684000000000000,
            40929700000000000,
            30754600000000000,
            49194900000000000,
            622564000000000000,
            147547000000000000,
            132276000000000000,
            35050100000000000,
            364118000000000000,
            89710800000000000,
            61229000000000000,
            142536000000000000,
            771505000000000000,
            133966000000000000,
            142739000000000000,
            112897291800000000,
            187247877800000000,
            138240592700000000,
            181912760400000000,
            187853001600000000,
            347532610700000000,
            852040908700000000,
            435491738400000064,
            213109769200000032,
            239272767100000000,
            569207603300000000,
            721019418199999872,
            895656107099999872,
            694697848800000000,
            765192953000000000,
            1466358304400000000,
            1561955098800000000,
            2985638146400000000,
            1881847314800000000,
            1656411305400000000,
            544973063500000000,
            853697568700000000,
            1066848319200000000,
            561893184500000000,
            686227359000000000,
            854983371900000000,
            85489978816399998976,
            14081012599800000512,
            6533892823900000256,
            52903909817799999488,
            24408293248299999232,
            20477638300700000256,
            13492129235399999488,
            17459670183800000512,
            9168197921699999744,
            42241042048999997440,
            18976359993600000000,
            6444166938999999488,
            4123071740099999744,
            7657559241200000000,
            10551369490300000256,
            9166120706200000512,
            6724445877200000000,
            5666480291200000000,
            5211940353900000256,
            3097486934400000000,
            3690847218000000000,
            58142471215900000256,
            13886245537999998976,
            2893710487000000000,
            15428892156700000256,
            3707096998200000000,
            3783142484900000256,
            2642455270200000000,
            74223480700600008704,
            82678000133200003072,
            150648519511399989248,
            98295839436200001536,
            55182406820799995904
        ];
        marketCap = [
            631173383600000000,
            591353384300000000,
            332676235900000000,
            377488398700000000,
            272341535799999968,
            226915652200000000,
            185653271100000000,
            119277376700000000,
            373655281700000000,
            224209328600000000,
            232903664500000000,
            181390215000000000,
            136150644200000000,
            142675586600000000,
            124142484500000000,
            102668642500000000,
            153116736000000000,
            198765704100000000,
            184921761800000000,
            129989935000000000,
            124605200700000000,
            139313638100000000,
            131061916700000000,
            154720142800000000,
            285028882000000000,
            257952849100000000,
            241593376000000000,
            234848930100000032,
            241830484200000032,
            319418619800000000,
            242914837000000000,
            248776364899999968,
            249634766500000000,
            234987820700000000,
            229405497300000000,
            240292214400000000,
            222033375200000000,
            222080261700000032,
            356895221599999936,
            814792170400000128,
            2912233239900000256,
            2862407222000000000,
            1897989835800000256,
            2288043889199999744,
            1274625564800000000,
            1256085341100000000,
            2331642272400000000,
            10100103387100000256,
            6791991525599998976,
            6824199418200000512,
            3209110916299999744,
            5952371791100000256,
            3896610955800000000,
            2876305668399999488,
            3401648093000000000,
            5558325042899999744,
            6872151428899999744,
            4396032535600000000,
            2537282058000000000,
            2759285116899999744,
            2272833352400000000,
            2340892087700000256,
            2473500121000000000,
            2997901792000000000,
            4120395948299999744,
            3914233175800000000,
            3496105377500000256,
            3038987544000000000,
            2898827186800000000,
            3187116964499999744,
            2836322778299999744,
            2488830335900000256,
            2947195114000000000,
            2760619918399999488,
            2244799531100000256,
            3038216923299999744,
            3187923461600000512,
            2904260137500000256,
            4052285979200000000,
            4059954887799999488,
            3326623636299999744,
            3269060273399999488,
            4520999670099999744,
            5981490013699999744,
            47677458052700004352,
            61777109935800000512,
            69212490821800001536,
            436815595354800062464,
            422989536055899979776,
            331110437245199974400,
            272197224107599986688,
            365017011264299991040,
            268583567058899992576,
            369725726496699973632,
            284135054139199979520,
            226198593069500006400,
            188133967183700000768,
            176659694691100000256,
            182854895315299991552,
            169231389640400011264,
            113917263022000013312,
            87676246330400014336,
            90577285401299992576,
            81367117890100002816,
            81795187532400001024,
            168526353566499995648,
            141771709626900004864,
            93259568524000002048,
            127585941708899991552,
            107130463525200003072,
            106887219154800001024,
            111004619157900001280,
            100022321007300001792,
            93060517000799993856,
            109259942399300009984,
            89822788325099995136,
            87758935577499992064
        ];
        markets = 4150000000000;
        github_commits = 14210000000000;
        algo_array = new uint256[](0);
    }

    // ========================================================
    //         Functions to add data into the array
    // ========================================================

    function addOpen(uint256 item) public onlyOwner {
        open.push(item);
    }

    function addClose(uint256 item) public onlyOwner {
        close.push(item);
    }

    function addHigh(uint256 item) public onlyOwner {
        high.push(item);
    }

    function addLow(uint256 item) public onlyOwner {
        low.push(item);
    }

    function addVolume(uint256 item) public onlyOwner {
        volume.push(item);
    }

    function addMarketCap(uint256 item) public onlyOwner {
        marketCap.push(item);
    }

    function update_markets(uint256 item) public onlyOwner {
        markets = item;
    }

    function update_github_commits(uint256 item) public onlyOwner {
        github_commits = item;
    }

    // ========================================================
    //            Functions to get the data arrays
    // ========================================================

    function getParams()
        public
        view
        returns (
            uint256[] memory,
            uint256[] memory,
            uint256[] memory,
            uint256[] memory,
            uint256[] memory,
            uint256[] memory,
            uint256,
            uint256,
            uint256[] memory
        )
    {
        return (
            open,
            close,
            high,
            low,
            volume,
            marketCap,
            markets,
            github_commits,
            algo_array
        );
    }

    // ============================================================
    //           Functions used in the algorithm
    // ============================================================

    function normalize_between_zero_and_1e10(
        uint256 value
    ) public pure returns (uint256) {
        unchecked {
            while (value > 1e10) {
                value /= 10;
            }
            while (value < 0) {
                value *= 10;
            }
        }
        return uint256(value);
    }

    function check_size(
        uint256 value1,
        uint256 value2
    ) public pure returns (uint256) {
        unchecked {
            if (value1 > value2) {
                return uint256(1);
            } else {
                return uint256(0);
            }
        }
    }

    function abs(int256 n) internal pure returns (uint256) {
        unchecked {
            return uint256(n >= 0 ? n : -n);
        }
    }

    function generate_algo_array() public {
        for (uint256 i = 0; i < (open.length - 1); i++) {
            uint256 first;
            if (high[1] > low[1]) {
                first = high[1] - low[1];
            } else {
                first = low[1] - high[1];
            }
            uint256 second;
            if (close[1] > open[1]) {
                second = close[1] - open[1];
            } else {
                second = open[1] - close[1];
            }
            uint256 result;
            if (second == 0) {
                result = 1e10;
            } else {
                result = ((first * 1e10) / (second));
            }
            uint256 algo = (2 * normalize_between_zero_and_1e10(result)) +
                (2 *
                    (1e10 - (SafeSub(marketCap[i], marketCap[i + 1]) / 1e11))) +
                (2 * (1e10 - (SafeSub(volume[i], volume[i + 1]) / 1e11))) +
                (1 * ((markets) / 1e4)) +
                (2 * ((github_commits) / 1e5)) +
                (1e10 * check_size(close[i], open[i]));

            algo_array.push(algo);
        }
    }

    function return_safeness_score() public view returns (uint256) {
        uint256 score_sum = 0;
        for (uint256 i = 0; i < algo_array.length; i++) {
            score_sum = score_sum + algo_array[i];
        }
        return ((score_sum) / algo_array.length);
    }
}
